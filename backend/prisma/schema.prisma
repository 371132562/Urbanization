// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// 大洲字典表
model Continent {
  id      String    @id @default(uuid())
  cnName  String
  enName  String
  Country Country[]

  @@index([id])
  @@index([cnName])
  @@index([enName])
}

// 国家字典表
model Country {
  id                   String                 @id @default(uuid()) // 主键ID（UUID）
  cnName               String // 国家中文名
  enName               String // 国家英文名
  continentId          String
  continent            Continent              @relation(fields: [continentId], references: [id]) // 所属大洲
  UrbanizationWorldMap UrbanizationWorldMap[]

  @@index([id])
  @@index([cnName])
  @@index([enName])
}

// 一级维度
model TopIndicator {
  id                 String               @id @default(uuid()) // 主键ID（UUID）
  indicatorCnName    String // 指标中文名称
  indicatorEsName    String // 指标英文名称
  description        String? // 描述
  weight             Decimal //权重
  SecondaryIndicator SecondaryIndicator[]

  @@index([id])
  @@index([indicatorCnName])
  @@index([indicatorEsName])
  @@index([weight])
}

// 二级要素
model SecondaryIndicator {
  id                String              @id @default(uuid()) // 主键ID（UUID）
  indicatorCnName   String // 指标中文名称
  indicatorEsName   String // 指标英文名称
  description       String? // 描述
  weight            Decimal //权重
  topIndicatorId    String
  topIndicator      TopIndicator        @relation(fields: [topIndicatorId], references: [id]) // 一级维度
  detailedIndicator DetailedIndicator[]

  @@index([id])
  @@index([indicatorCnName])
  @@index([indicatorEsName])
  @@index([weight])
}

// 三级指标
model DetailedIndicator {
  id                   String              @id @default(uuid()) // 主键ID（UUID）
  indicatorCnName      String // 指标中文名称
  indicatorEsName      String // 指标英文名称
  description          String? // 描述
  weight               Decimal //权重
  secondaryIndicatorId String
  SecondaryIndicator   SecondaryIndicator? @relation(fields: [secondaryIndicatorId], references: [id])

  @@index([id])
  @@index([indicatorCnName])
  @@index([indicatorEsName])
  @@index([weight])
}

// 展示是否城镇化的世界地图
model UrbanizationWorldMap {
  id           String  @id @default(uuid())
  countryId    String
  country      Country @relation(fields: [countryId], references: [id])
  urbanization Boolean @default(false)
}

// 文章管理
model Article {
  id      String @id @default(uuid())
  title   String
  content String
  delete  Int    @default(0)
}
